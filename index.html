<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Imagine‚Äôs Web</title>

  <!-- OG / Sharing -->
  <meta property="og:title" content="Imagine‚Äôs Web">
  <meta property="og:description" content="Discord, projekty a moje vƒõci.">
  <meta property="og:image" content="https://i.imgur.com/sm3OB4b.jpeg">
  <meta property="og:url" content="https://yourdomain.com">
  <meta name="twitter:card" content="summary_large_image">

  <!-- iOS status bar -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Favicon -->
  <link rel="icon" href="https://i.imgur.com/sm3OB4b.jpeg" type="image/png">
  <link rel="apple-touch-icon" href="https://i.imgur.com/sm3OB4b.jpeg">

  <style>
    body {
      margin:0;
      padding:0;
      font-family: Arial, sans-serif;
      background:#000;
      color:#fff;
      display:flex;
      flex-direction:column;
      align-items:center;
      overflow-x:hidden;
    }

    /* Preloader */
    #preloader {
      position:fixed; top:0; left:0; right:0; bottom:0;
      display:flex; justify-content:center; align-items:center;
      background:#000; z-index:9999;
    }
    #enter-btn {
      padding:16px 32px;
      font-size:20px;
      color:#fff;
      background:#ff7bbf;
      border:none;
      border-radius:8px;
      cursor:pointer;
      box-shadow:0 0 15px #ff7bbf;
      transition:0.3s;
    }
    #enter-btn:hover {
      transform:scale(1.05);
      box-shadow:0 0 25px #ff7bbf;
    }

    /* Main Content */
    #main-content {
      display:none;
      flex-direction:column;
      align-items:center;
      padding:20px;
    }

    .profile-pic {
      width:120px;
      height:120px;
      border-radius:50%;
      border:3px solid #ff7bbf;
      box-shadow:0 0 15px #ff7bbf;
      margin:20px 0;
      transition:0.3s;
    }

    h1 {color:#ffb7dc;}
    h2 {color:#ffb7dc;}

    /* Links */
    .links {
      margin:20px 0;
    }
    .links a {
      margin:0 10px;
      color:#ff7bbf;
      text-decoration:none;
      font-weight:bold;
      transition:0.3s;
    }
    .links a:hover {
      color:#fff;
      text-shadow:0 0 15px #ff7bbf;
    }

    /* Discord status */
    #discord-status {
      margin:20px;
      padding:10px 15px;
      border-radius:8px;
      border:1px solid #ff7bbf;
      box-shadow:0 0 10px #ff7bbf;
      font-weight:bold;
    }

    /* Pulse animace podle hudby */
    .pulse {
      animation:pulse 1s infinite;
    }
    @keyframes pulse {
      0% {box-shadow:0 0 5px #ff7bbf;}
      50% {box-shadow:0 0 25px #ff7bbf;}
      100% {box-shadow:0 0 5px #ff7bbf;}
    }
  </style>
</head>
<body>
  <div id="preloader">
    <button id="enter-btn">Enter</button>
  </div>

  <div id="main-content">
    <img src="https://i.imgur.com/gDdnj6n.jpeg" alt="Imagine" class="profile-pic">
    <h1>Imagine</h1>
    <h2>Projects & Discord</h2>

    <div class="links">
      <a href="https://instagram.com/imagine_ofc_" target="_blank">Instagram</a>
      <a href="https://x.com/imagine_ofc" target="_blank">X</a>
      <a href="https://discord.gg/otakuczsk" target="_blank">Discord</a>
    </div>

    <div id="discord-status">Naƒç√≠t√°m status...</div>
  </div>
    <!-- Hudba -->
  <audio id="bg-music" 
         src="https://files.catbox.moe/ay1bsm.mp3" 
         playsinline 
         webkit-playsinline></audio>

  <script>
    const enterBtn = document.getElementById("enter-btn");
    const preloader = document.getElementById("preloader");
    const mainContent = document.getElementById("main-content");
    const bgMusic = document.getElementById("bg-music");
    const profilePic = document.querySelector(".profile-pic");
    const discordStatusDiv = document.getElementById("discord-status");

    let audioContext, analyser, source, dataArray, isPlaying = false;

    enterBtn.addEventListener("click", async () => {
      preloader.style.display = "none";
      mainContent.style.display = "flex";

      try {
        if (!audioContext) {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
          analyser = audioContext.createAnalyser();
          analyser.fftSize = 256;
          dataArray = new Uint8Array(analyser.frequencyBinCount);

          source = audioContext.createMediaElementSource(bgMusic);
          source.connect(analyser);
          analyser.connect(audioContext.destination);
        }

        if (audioContext.state === "suspended") {
          await audioContext.resume();
        }

        bgMusic.currentTime = 0;
        bgMusic.load(); // iPhone fix
        await bgMusic.play();

        isPlaying = true;
        visualize();
      } catch (err) {
        console.error("Hudba se nepoda≈ôila spustit:", err);
      }
    });

    function visualize() {
      requestAnimationFrame(visualize);
      if (!isPlaying) return;

      analyser.getByteFrequencyData(dataArray);
      let sum = dataArray.reduce((a, b) => a + b, 0);
      let avg = sum / dataArray.length;

      if (avg > 50) {
        profilePic.classList.add("pulse");
      } else {
        profilePic.classList.remove("pulse");
      }
    }

    // Discord status p≈ôes Lanyard
    async function getDiscordStatus() {
      try {
        const res = await fetch("https://api.lanyard.rest/v1/users/904431016175894528");
        const json = await res.json();
        if (json.success) {
          const status = json.data.discord_status;
          let statusText = "";
          let color = "";

          switch(status) {
            case "online":
              statusText = "üü¢ Online";
              color = "#43b581";
              break;
            case "idle":
              statusText = "üåô Idle";
              color = "#faa61a";
              break;
            case "dnd":
              statusText = "‚õî Do Not Disturb";
              color = "#f04747";
              break;
            default:
              statusText = "‚ö´ Offline";
              color = "#747f8d";
              break;
          }

          discordStatusDiv.textContent = `Status: ${statusText}`;
          discordStatusDiv.style.color = color;
        } else {
          discordStatusDiv.textContent = "Nepoda≈ôilo se naƒç√≠st status";
        }
      } catch (e) {
        console.error(e);
        discordStatusDiv.textContent = "Chyba p≈ôi naƒç√≠t√°n√≠ statusu";
      }
    }

    getDiscordStatus();
    setInterval(getDiscordStatus, 30000); // ka≈æd√Ωch 30s
  </script>
</body>
</html>
