<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Imagine</title>
  <meta name="description" content="Imagine — personal site / portfolio.">
  <link rel="icon" href="https://i.imgur.com/IJCyEtg.png" type="image/png">

  <style>
    :root{
      --bg: #000000;
      --fg: #f5f5f5;
      --accent: #e4bdff; /* pastel purple/pink */
      --card-bg: rgba(255,255,255,0.02);
      --glass: rgba(255,255,255,0.03);
    }

    html,body{ height:100%; margin:0; padding:0; }
    body{
      min-height:100vh;
      padding:40px;
      box-sizing:border-box;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--fg);
      background: var(--bg);
      background-image:
        radial-gradient(circle at 10% 10%, rgba(255,255,255,0.02) 0px, transparent 30%),
        radial-gradient(circle at 90% 90%, rgba(255,255,255,0.015) 0px, transparent 30%),
        linear-gradient(180deg, rgba(255,255,255,0.01), transparent 60%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    .wrap{ max-width:980px; margin:0 auto; display:flex; gap:28px; flex-direction:column; }

    /* animated heading (per-letter) */
    .heading{ display:flex; gap:12px; align-items:center; font-size:64px; letter-spacing:4px; }
    .word{ display:flex; }
    .letter{
      display:inline-block;
      transition: transform .15s ease, font-family .3s ease;
      padding:0 2px;
      will-change: transform, font-family;
      cursor:default;
    }

    /* bio/about */
    .bio{
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      padding:18px; border-radius:12px; box-shadow: 0 6px 20px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    .bio h2{ margin:0 0 8px; font-size:18px; }
    .bio p{ margin:0; color: rgba(245,245,245,0.95); line-height:1.55; }

    /* music area */
    .music-area{ display:flex; gap:18px; align-items:flex-start; flex-wrap:wrap; }
    .artist-widgets, .tracks {
      background: var(--card-bg); border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,0.03);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    }

    .artist-widgets{ width:340px; max-width:100%; }
    .artist-frame{ border-radius:10px; overflow:hidden; background: rgba(0,0,0,0.16); height:320px; display:flex; align-items:center; justify-content:center; position:relative; }
    .artist-frame iframe{ width:100%; height:100%; border:0; opacity:0; transform: translateY(6px) scale(.995); transition: opacity .6s ease, transform .6s ease; }
    .artist-frame iframe.visible{ opacity:1; transform:none; }

    .artist-controls{ margin-top:10px; display:flex; gap:8px; }
    .artist-controls button{ padding:8px 10px; border-radius:10px; background:transparent; color:var(--fg); border:1px solid rgba(255,255,255,0.04); cursor:pointer; }

    /* tracks column */
    .tracks{ flex:1; min-width:300px; display:flex; flex-direction:column; gap:12px; }
    .tracks h3{ margin:0; font-size:18px; }
    .track-grid{ display:grid; grid-template-columns: 1fr; gap:10px; }
    @media (min-width:760px){ .track-grid{ grid-template-columns: 1fr 1fr; } }

    .track-card{ border-radius:10px; padding:10px; background: rgba(0,0,0,0.22); border:1px solid rgba(255,255,255,0.02); display:flex; flex-direction:column; gap:8px; }
    .track-card.fav{ box-shadow: 0 0 28px rgba(228,189,255,0.14); border:1px solid rgba(228,189,255,0.24); position:relative; }
    .track-card.fav::after{
      content:"FAV"; position:absolute; right:-10px; top:-10px; background:var(--accent); color:#000; padding:6px 8px; border-radius:10px; font-weight:700; transform:rotate(8deg);
    }
    .track-card .meta{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .track-card .meta .title{ font-weight:600; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .track-card iframe{ width:100%; height:80px; border:0; border-radius:6px; }

    /* contact & misc */
    #email-copy{ cursor:pointer; display:inline-block; padding:10px 14px; border-radius:12px; background:rgba(255,255,255,0.015); border:1px solid rgba(255,255,255,0.02); }
    #copy-msg{ opacity:0; transition:opacity .3s; margin-top:8px; color: #fff; }

    footer{ color: rgba(255,255,255,0.45); margin-top:12px; font-size:13px; }

    /* listening visual */
    .listening { box-shadow: 0 0 80px rgba(228,189,255,0.18), inset 0 0 30px rgba(228,189,255,0.06); transform: translateY(-2px); transition: all .25s ease; }

    @media (max-width:640px){ body{ padding:20px } .heading{ font-size:44px } .artist-frame{ height:220px } }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- Animated heading (per-letter) -->
    <header>
      <div class="heading" aria-hidden="true">
        <div class="word" id="imagine-heading" title="Imagine">
          <span class="letter">I</span><span class="letter">m</span><span class="letter">a</span>
          <span class="letter">g</span><span class="letter">i</span><span class="letter">n</span><span class="letter">e</span>
        </div>
      </div>
    </header>

    <section class="bio" aria-labelledby="bio-heading">
      <h2 id="bio-heading">Bio</h2>
      <p>
        Hi — I’m Imagine, a developer from the Czech Republic. I build interactive websites, small games and community tools. I like clean code, subtle visuals and music that fits the mood.
      </p>
    </section>

    <section class="music-area" aria-labelledby="music-heading">
      <!-- Artist widgets column -->
      <div class="artist-widgets" id="artist-widgets">
        <h3 id="music-heading">Artists — Spotify widgets</h3>
        <div class="artist-frame" id="artist-frame" aria-hidden="false">
          <!-- Lazy-loaded iframes: data-src used to avoid both loading simultaneously (fix flicker) -->
          <iframe id="artist-1" data-src="https://open.spotify.com/embed/artist/74KM79TiuVKeVCqs8QtB0B" title="Artist 1" loading="lazy"></iframe>
          <iframe id="artist-2" data-src="https://open.spotify.com/embed/artist/1Xyo4u8uXC1ZmMpatF05PJ" title="Artist 2" loading="lazy"></iframe>
        </div>

        <div class="artist-controls">
          <button id="toggle-artists">Pause rotate</button>
          <button id="simulate-listen">Simulate listening</button>
        </div>
      </div>

      <!-- Tracks column: each track has its own embed -->
      <div class="tracks">
        <h3>Fav songs</h3>

        <div class="track-grid" id="track-grid">
          <!-- Favorite track (highlighted + embed) -->
          <div class="track-card fav" data-track="09LrGvT9KsACH66RHYMDyR">
            <div class="meta">
              <div class="title">Favorite — highlighted</div>
              <a class="open-link" href="https://open.spotify.com/track/09LrGvT9KsACH66RHYMDyR" target="_blank" rel="noopener">Open in Spotify</a>
            </div>
            <iframe src="https://open.spotify.com/embed/track/09LrGvT9KsACH66RHYMDyR" loading="lazy" title="Fav track"></iframe>
          </div>

          <!-- other tracks (each embedded) -->
          <div class="track-card" data-track="102YUQbYmwdBXS7jwamI90">
            <div class="meta"><div class="title">Track 102YUQbYmwdBXS7jwamI90</div><a class="open-link" href="https://open.spotify.com/track/102YUQbYmwdBXS7jwamI90" target="_blank" rel="noopener">Open</a></div>
            <iframe src="https://open.spotify.com/embed/track/102YUQbYmwdBXS7jwamI90" loading="lazy" title="track 1"></iframe>
          </div>

          <div class="track-card" data-track="1UHS8Rf6h5Ar3CDWRd3wjF">
            <div class="meta"><div class="title">Track 1UHS8Rf6h5Ar3CDWRd3wjF</div><a class="open-link" href="https://open.spotify.com/track/1UHS8Rf6h5Ar3CDWRd3wjF" target="_blank" rel="noopener">Open</a></div>
            <iframe src="https://open.spotify.com/embed/track/1UHS8Rf6h5Ar3CDWRd3wjF" loading="lazy" title="track 2"></iframe>
          </div>

          <div class="track-card" data-track="2vXKRlJBXyOcvZYTdNeckS">
            <div class="meta"><div class="title">Track 2vXKRlJBXyOcvZYTdNeckS</div><a class="open-link" href="https://open.spotify.com/track/2vXKRlJBXyOcvZYTdNeckS" target="_blank" rel="noopener">Open</a></div>
            <iframe src="https://open.spotify.com/embed/track/2vXKRlJBXyOcvZYTdNeckS" loading="lazy" title="track 3"></iframe>
          </div>

          <div class="track-card" data-track="0Nwar8rweBUyfyuoyjjUvk">
            <div class="meta"><div class="title">Track 0Nwar8rweBUyfyuoyjjUvk</div><a class="open-link" href="https://open.spotify.com/track/0Nwar8rweBUyfyuoyjjUvk" target="_blank" rel="noopener">Open</a></div>
            <iframe src="https://open.spotify.com/embed/track/0Nwar8rweBUyfyuoyjjUvk" loading="lazy" title="track 4"></iframe>
          </div>

          <div class="track-card" data-track="0wzPHTgOtFIDhk2rD3Au4x">
            <div class="meta"><div class="title">Track 0wzPHTgOtFIDhk2rD3Au4x</div><a class="open-link" href="https://open.spotify.com/track/0wzPHTgOtFIDhk2rD3Au4x" target="_blank" rel="noopener">Open</a></div>
            <iframe src="https://open.spotify.com/embed/track/0wzPHTgOtFIDhk2rD3Au4x" loading="lazy" title="track 5"></iframe>
          </div>
        </div>
      </div>
    </section>

    <section class="contact">
      <h2 style="margin:0 0 8px 0; font-size:18px;">Contact</h2>
      <div id="email-copy">imagineofc@protonmail.com</div>
      <div id="copy-msg">Copied!</div>

      <div style="margin-top:12px; display:flex; gap:12px; flex-wrap:wrap;">
        <a class="open-link" href="https://www.instagram.com/imagine_ofc_" target="_blank" rel="noopener">Instagram</a>
        <a class="open-link" href="https://project-luna-off.vercel.app/" target="_blank" rel="noopener">LUNA</a>
      </div>
    </section>

    <footer>© Imagine</footer>
  </div>

  <script>
    // --------------------------
    // PER-LETTER HEADING ANIMATION (font flipper + tiny jitter)
    // --------------------------
    (function(){
      const fonts = [
        '"Times New Roman", Times, serif','Georgia, serif','Palatino, serif','Garamond, serif',
        '"Courier New", monospace','Arial, sans-serif','Verdana, sans-serif','Impact, sans-serif',
        '"Comic Sans MS", cursive'
      ];
      const letters = document.querySelectorAll('.letter');
      document.getElementById('imagine-heading').setAttribute('aria-label','Imagine');

      letters.forEach((el, idx) => {
        const offset = (idx % 3) * 140;
        setTimeout(() => {
          changeFont(el);
          setInterval(() => changeFont(el), 700 + Math.random()*800);
        }, offset);
      });

      function changeFont(el){
        const current = el.style.fontFamily || '';
        let pick;
        do { pick = fonts[Math.floor(Math.random()*fonts.length)]; } while(pick === current);
        el.style.fontFamily = pick;
        el.style.transform = 'translateY(' + (Math.random()*6 - 3) + 'px) rotate(' + (Math.random()*2 - 1) + 'deg)';
      }
    })();

    // --------------------------
    // TITLE TYPEWRITER EFFECT (tab text)
    // --------------------------
    (function(){
      const text = "Imagine";
      const speed = 120;
      const pause = 900;
      let i = 0, forward = true;

      function tick(){
        if(forward){
          i++;
          document.title = text.slice(0,i) + (i % 2 ? '▌' : '');
          if(i >= text.length){ forward = false; setTimeout(tick, pause); return; }
        } else {
          i--;
          document.title = text.slice(0,i) + (i % 2 ? '▌' : '');
          if(i <= 0){ forward = true; setTimeout(tick, 300); return; }
        }
        setTimeout(tick, speed);
      }
      setTimeout(tick, 400);
    })();

    // --------------------------
    // Artist widget rotation with lazy-load (prevents flicker)
    // --------------------------
    (function(){
      const iframe1 = document.getElementById('artist-1');
      const iframe2 = document.getElementById('artist-2');
      const toggleBtn = document.getElementById('toggle-artists');

      // use data-src lazy strategy:
      function loadIframe(iframe) {
        if(!iframe) return;
        if(!iframe.src || iframe.src === '') {
          const ds = iframe.getAttribute('data-src');
          if(ds) iframe.src = ds;
        }
      }

      // show first on load
      let visible = 1;
      loadIframe(iframe1);
      iframe1.classList.add('visible');

      // ensure other iframe not loaded until needed
      iframe2.classList.remove('visible');

      const ROTATE_MS = 8000;
      let rotating = true;

      const rot = setInterval(() => {
        if(!rotating) return;
        if(visible === 1){
          // switch to 2
          loadIframe(iframe2);
          iframe1.classList.remove('visible');
          iframe2.classList.add('visible');
          visible = 2;
        } else {
          loadIframe(iframe1);
          iframe2.classList.remove('visible');
          iframe1.classList.add('visible');
          visible = 1;
        }
      }, ROTATE_MS);

      toggleBtn.addEventListener('click', () => {
        rotating = !rotating;
        toggleBtn.textContent = rotating ? 'Pause rotate' : 'Resume rotate';
      });

      // expose control if you want from console
      window._artistControl = { pause: ()=> rotating=false, resume: ()=> rotating=true };
    })();

    // --------------------------
    // Email copy
    // --------------------------
    (function(){
      const emailBox = document.getElementById("email-copy");
      const msg = document.getElementById("copy-msg");
      emailBox.addEventListener("click", async () => {
        try {
          const emailText = emailBox.innerText.trim();
          await navigator.clipboard.writeText(emailText);
          msg.style.opacity = 1;
          setTimeout(()=> msg.style.opacity = 0, 1200);
        } catch(e){ console.warn('copy failed', e); }
      });
    })();

    // --------------------------
    // Listening visual mode (best-effort)
    // Because cross-origin iframes don't expose play events, we simulate:
    // - clicking a track embed or the "Simulate listening" button toggles ui.
    // --------------------------
    (function(){
      const simulateBtn = document.getElementById('simulate-listen');
      const artistWidgets = document.getElementById('artist-widgets');
      let listening = false;
      function setListening(on){
        listening = !!on;
        if(listening) artistWidgets.classList.add('listening');
        else artistWidgets.classList.remove('listening');
      }

      simulateBtn.addEventListener('click', () => {
        setListening(!listening);
        simulateBtn.textContent = listening ? 'Stop simulation' : 'Simulate listening';
      });

      // clicking any track open link will also trigger a short listening flash
      document.querySelectorAll('.track-card .open-link').forEach(a => {
        a.addEventListener('click', () => {
          setListening(true);
          setTimeout(()=> setListening(false), 35000); // 35s
        });
      });

      // also attempt to catch user clicks on iframes: add an overlay that catches clicks and triggers listening
      document.querySelectorAll('.track-card iframe').forEach(iframe => {
        const wrapper = iframe.parentElement;
        // create a transparent overlay that sits on top; clicking it triggers listening then removes the overlay after first click
        const overlay = document.createElement('div');
        Object.assign(overlay.style, {
          position:'absolute', inset:'0', cursor:'pointer', background:'transparent'
        });
        wrapper.style.position = 'relative';
        wrapper.appendChild(overlay);
        overlay.addEventListener('click', () => {
          setListening(true);
          setTimeout(()=> setListening(false), 35000);
          // remove overlay so user can interact with iframe afterwards
          overlay.remove();
        });
      });

    })();
  </script>
</body>
</html>
