<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>imagine</title>
  <meta name="theme-color" content="#fdd4ff">
  <link rel="icon" href="https://i.imgur.com/VIK1odj.jpeg">

  <style>
  :root{
    --pink: #fdd4ff;
    --bg: #000000;
    --white: #ffffff;
    --muted-white: rgba(255,255,255,0.75);
    --accent: #8be9fd;
    --radius: 12px;
    --max-width: 1200px;
    --font-main: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    min-height:100vh;
    font-family:var(--font-main);
    background: radial-gradient(1200px 600px at 10% 10%, rgba(20,20,20,0.35), transparent), 
                radial-gradient(900px 400px at 90% 90%, rgba(30,10,40,0.25), transparent),
                var(--bg);
    color:var(--white);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* Overlay (ENTER) */
  .entry-overlay{
    position:fixed;
    inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,0.95), rgba(0,0,0,0.92));
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:9999;
    flex-direction:column;
    gap:22px;
  }
  .enter-btn{
    padding:18px 36px;
    border-radius:12px;
    border:2px solid rgba(255,255,255,0.08);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    color:var(--white);
    font-weight:800;
    letter-spacing:3px;
    cursor:pointer;
    font-size:18px;
    transition:transform .12s ease, box-shadow .12s;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  }
  .enter-btn:active{ transform: translateY(2px) scale(.995) }

  .entry-small{
    color:var(--muted-white);
    font-size:13px;
    opacity:.9;
  }

  /* Layout */
  .app{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    position:relative;
    padding:36px 22px;
  }

  /* header reduced (kept only small status) */
  header.header {
    width: min(100%, var(--max-width));
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:12px;
    padding:8px 12px;
    z-index:20;
  }
  .status {
    color:var(--muted-white);
    font-size:13px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,0.04);
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  }

  /* HERO: big title centered on page */
  .hero{
    width:100%;
    max-width:var(--max-width);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    margin-top:8px;
    text-align:center;
    z-index:10;
    pointer-events:none;
  }

  .title-agg {
    font-weight:900;
    display:flex;
    gap:6px;
    align-items:center;
    user-select:none;
    pointer-events:auto;
  }
  .title-agg span {
    display:inline-block;
    transition: transform .12s cubic-bezier(.2,.9,.2,1), color .12s, text-shadow .12s;
    will-change: font-family, transform, text-shadow, color;
    padding:2px 0;
    color:var(--white);
    text-shadow: 0 6px 30px rgba(0,0,0,0.6);
  }

  /* responsive big size */
  .title-agg { font-size: clamp(46px, 14vw, 120px); letter-spacing: -2px; }
  .subtitle-small { color:var(--muted-white); font-size:14px; margin-top:-6px; pointer-events:none; }

  /* Main layout with about + links */
  main {
    width: min(100%, var(--max-width));
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:26px;
    align-items:start;
    margin-top:10px;
  }

  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: 14px;
    padding:26px;
    border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 20px 60px rgba(0,0,0,0.7);
    pointer-events:auto;
  }

  h2.section-title { margin:0 0 10px 0; font-size:18px; color:var(--pink); letter-spacing:1px; text-transform:uppercase; }
  p.about { color: #e6e6e6; font-size:15px; line-height:1.6; margin:0; }

  .links-panel{
    background: rgba(255,255,255,0.02);
    border-radius:12px;
    padding:14px;
    border:1px solid rgba(255,255,255,0.03);
    display:grid;
    gap:12px;
    pointer-events:auto;
  }
  .link-item{
    display:flex;
    gap:12px;
    align-items:center;
    padding:10px;
    border-radius:10px;
    background:transparent;
    cursor:pointer;
    transition: transform .12s ease, background .12s;
    border: 1px solid rgba(255,255,255,0.03);
  }
  .link-item:hover{ transform: translateY(-6px); background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)) }
  .link-item img{width:46px;height:46px;border-radius:8px;object-fit:cover}

  /* white details (will pulse red on big change) */
  .white-detail { color: var(--white); border-color: var(--white); box-shadow: 0 6px 20px rgba(253,212,255,0.02); }
  .white-detail a { color: var(--white); text-decoration:none; }

  .pulse-red {
    animation: toRed 1.1s ease-in-out;
  }
  @keyframes toRed {
    0% { color: var(--white); border-color: var(--white); box-shadow: 0 6px 24px rgba(253,212,255,0.02); transform: none; }
    40% { color: #ff4a4a; border-color: #ff4a4a; box-shadow: 0 18px 50px rgba(255,74,74,0.16); transform: scale(1.02) translateY(-2px); text-shadow: 0 10px 30px rgba(255,74,74,0.08); }
    100% { color: var(--white); border-color: var(--white); box-shadow: 0 6px 20px rgba(253,212,255,0.02); transform: none; }
  }

  .controls { display:flex; gap:10px; margin-top:16px; align-items:center; flex-wrap:wrap; }
  .btn { background:transparent; border:1px solid rgba(255,255,255,0.06); padding:8px 12px; border-radius:8px; cursor:pointer; color:var(--muted-white); }
  .btn.primary { background:var(--pink); color:#000; border:none; font-weight:700; }

  footer.footer {
    width:min(100%,var(--max-width));
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
    padding:18px 0;
    color:var(--muted-white);
    pointer-events:none;
  }

  @media (max-width:980px){
    main{ grid-template-columns: 1fr; }
    .links-panel{ order: 2; }
    .hero{ margin-top:18px }
  }

  @media (prefers-reduced-motion: reduce){
    .title-agg span { transition: none; animation: none; }
  }
  </style>
</head>
<body>
  <!-- Entry overlay with big ENTER button -->
  <div id="entryOverlay" class="entry-overlay" role="dialog" aria-modal="true" aria-label="Enter site">
    <div style="pointer-events:none;">
      <div id="entryTitle" class="title-agg" style="font-size: clamp(36px, 10vw, 96px);">
        <!-- letters will be injected by JS for aggressive per-letter changes -->
      </div>
    </div>
    <div class="entry-small">Press ENTER to enter</div>
    <button id="enterBtn" class="enter-btn" aria-label="Enter site">ENTER</button>
  </div>

  <div class="app" id="appRoot" aria-hidden="true">
    <header class="header">
      <div id="statusText" class="status white-detail">Loading…</div>
    </header>

    <section class="hero" aria-hidden="false">
      <div id="titleAgg" class="title-agg" aria-hidden="true"></div>
      <div class="subtitle-small">creative projects & visuals</div>
    </section>

    <main>
      <section class="card white-detail" aria-labelledby="aboutHeading">
        <h2 id="aboutHeading" class="section-title">About</h2>
        <p class="about" id="aboutText">
          <!-- about text injected by JS -->
        </p>

        <div class="controls" style="margin-top:18px;">
          <button id="pauseBtn" class="btn">Pause</button>
          <button id="muteBtn" class="btn">Mute</button>
        </div>
      </section>

      <aside class="links-panel white-detail" role="navigation" aria-label="Social links">
        <div class="link-item white-detail" data-url="https://instagram.com/imagine_ofc_" title="Instagram">
          <img src="https://i.imgur.com/2kUGZ8w.png" alt="Instagram">
          <div>
            <div style="font-weight:700">Instagram</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.85)">@imagine_ofc_</div>
          </div>
        </div>

        <div class="link-item white-detail" data-url="https://twitch.tv/Imagine_ofc" title="Twitch">
          <img src="https://i.imgur.com/dlkzRxg.png" alt="Twitch">
          <div>
            <div style="font-weight:700">Twitch</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.85)">Live</div>
          </div>
        </div>

        <div class="link-item white-detail" data-url="https://m.youtube.com/@imagine_ofc" title="YouTube">
          <img src="https://i.imgur.com/y32pAoI.png" alt="YouTube">
          <div>
            <div style="font-weight:700">YouTube</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.85)">Videos</div>
          </div>
        </div>

        <div class="link-item white-detail" data-url="https://imagine-ofc.vercel.app/about.html" title="About">
          <img src="https://i.imgur.com/8hDawtU.jpeg" alt="About">
          <div>
            <div style="font-weight:700">About</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.85)">Project info</div>
          </div>
        </div>

        <div class="link-item white-detail" data-url="https://game.capcom.com/residentevil/sp/en/p2450532.html" title="Resident Evil">
          <img src="https://i.imgur.com/c1OgfAW.jpeg" alt="Resident Evil">
          <div>
            <div style="font-weight:700">Resident Evil</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.85)">Capcom</div>
          </div>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <div style="color:var(--muted-white)">Built with ❤️ — Imagine</div>
      <div style="color:var(--muted-white)">© Imagine</div>
    </footer>
  </div>

  <!-- Hidden audio element (source can be GitHub raw or Catbox) -->
  <audio id="bgAudio" preload="auto" crossorigin="anonymous">
    <source src="https://raw.githubusercontent.com/Imagineoff/Tet/main/RE.mp3" type="audio/mpeg">
  </audio>

  <script>
  /* ------------------ Content (About) ------------------ */
  const aboutParts = [
    `Hello! I'm Imagine, a developer who builds interactive web projects and Discord bots.`,
    `I’d love to live in New York one day.`,
    `My favorite music artist is The Weeknd.`,
    `My favorite game series is Resident Evil and my favorite character is Ada Wong.`,
    `One of my favorite books is "Zoo Station: The Story of Christiane F."`,
    `My favorite multiplayer game is Dead by Daylight.`,
    `One of my favorite films is The Great Gatsby.`
  ];
  document.addEventListener('DOMContentLoaded', ()=>{
    document.getElementById('aboutText').textContent = aboutParts.join(' ');
  });

  /* ------------------ Links open in new tab ------------------ */
  document.querySelectorAll('.link-item').forEach(el=>{
    el.addEventListener('click', ()=> {
      const url = el.dataset.url;
      if(url) window.open(url, '_blank', 'noopener');
    });
  });

  /* ------------------ Aggressive per-letter title ------------------ */
  const titleStr = "Imagine";
  const fonts = [
    "Impact, Haettenschweiler, 'Arial Black', sans-serif",
    "Georgia, 'Times New Roman', Times, serif",
    "'Courier New', Courier, monospace",
    "Verdana, Geneva, sans-serif",
    "Roboto, 'Helvetica Neue', Arial, sans-serif",
    "'Lora', serif",
    "'Oswald', 'Helvetica Neue', Arial, sans-serif",
    "'Segoe UI', Tahoma, Geneva, sans-serif"
  ];

  function buildTitle(containerId){
    const container = document.getElementById(containerId);
    container.innerHTML = "";
    for(let ch of titleStr){
      const sp = document.createElement('span');
      sp.textContent = ch;
      sp.style.fontFamily = fonts[0];
      container.appendChild(sp);
    }
    return container;
  }

  const heroTitle = buildTitle('titleAgg');
  const entryTitle = buildTitle('entryTitle');

  // aggressive change: change random letters frequently
  function randomizeLetters(container, speed=80){
    return setInterval(()=>{
      const spans = container.querySelectorAll('span');
      const count = Math.floor(Math.random()*3) + 1;
      for(let i=0;i<count;i++){
        const idx = Math.floor(Math.random()*spans.length);
        const f = fonts[Math.floor(Math.random()*fonts.length)];
        spans[idx].style.fontFamily = f;
        spans[idx].style.transform = `translateY(${(Math.random()-0.5)*10}px) rotate(${(Math.random()-0.5)*6}deg)`;
        spans[idx].style.color = `rgba(255,255,255,${0.85 + Math.random()*0.15})`;
        spans[idx].style.textShadow = `0 ${6+Math.random()*8}px ${20+Math.random()*30}px rgba(0,0,0,0.6)`;
        (function(s){ setTimeout(()=> s.style.transform = '', 140); })(spans[idx]);
      }
    }, speed);
  }

  const intA = randomizeLetters(heroTitle, 90);
  const intB = randomizeLetters(entryTitle, 70);

  /* ------------------ Tab title typewriter ------------------ */
  const targetTitle = 'imagine';
  let ti = 0, typing = true;
  function typeTick() {
    if(typing) {
      ti++;
      document.title = targetTitle.slice(0, ti);
      if(ti >= targetTitle.length) {
        typing = false;
        setTimeout(()=> { typing = true; ti = 0; }, 1200);
      }
    }
    setTimeout(typeTick, 140);
  }
  typeTick();

  /* ------------------ Audio + visual pulse reaction ------------------ */
  const audioEl = document.getElementById('bgAudio');
  let audioCtx, analyser, source;
  const fftSize = 512;
  let prevAvg = 0;
  let cooldown = false;
  let rafId = null;
  const threshold = 28;

  function ensureAudioContext(){
    if(audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = fftSize;
    source = audioCtx.createMediaElementSource(audioEl);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
  }

  function getAverage(data){
    let sum = 0;
    for(let i=0;i<data.length;i++) sum += data[i];
    return sum / data.length;
  }

  function monitorAudio(){
    if(!analyser) return;
    const data = new Uint8Array(analyser.frequencyBinCount);
    analyser.getByteFrequencyData(data);
    const avg = getAverage(data);
    const delta = Math.abs(avg - prevAvg);
    if(delta > threshold && !cooldown) {
      triggerPulse();
      cooldown = true;
      setTimeout(()=> cooldown = false, 1200);
    }
    // subtle background glow based on low/high freq balance
    const low = data.slice(0, data.length/6).reduce((a,b)=>a+b,0)/ (data.length/6 || 1);
    const high = data.slice(data.length/3).reduce((a,b)=>a+b,0)/ (data.length*2/3 || 1);
    const glow = Math.min(1, Math.abs(low-high)/60);
    document.body.style.background = `radial-gradient(1200px 600px at 10% 10%, rgba(20,20,20,${0.35+glow*0.12}), transparent), radial-gradient(900px 400px at 90% 90%, rgba(30,10,40,${0.25+glow*0.12}), transparent), ${getComputedStyle(document.documentElement).getPropertyValue('--bg')}`;
    prevAvg = avg * 0.6 + prevAvg * 0.4;
    rafId = requestAnimationFrame(monitorAudio);
  }

  function triggerPulse(){
    const els = document.querySelectorAll('.white-detail');
    els.forEach(e => {
      e.classList.remove('pulse-red');
      void e.offsetWidth;
      e.classList.add('pulse-red');
      setTimeout(()=> e.classList.remove('pulse-red'), 1200);
    });
  }

  /* ------------------ ENTER overlay behavior ------------------ */
  const entryOverlay = document.getElementById('entryOverlay');
  const enterBtn = document.getElementById('enterBtn');

  async function enterSite(){
    try {
      ensureAudioContext();
      await audioCtx.resume();
      // small fade-in of volume
      audioEl.volume = 0;
      await audioEl.play();
      // fade to normal
      let v = 0;
      const fade = setInterval(()=>{ v += 0.06; audioEl.volume = Math.min(1, v); if(v>=1) clearInterval(fade); }, 60);
      // start monitor
      monitorAudio();
    } catch(e){
      console.warn('autoplay blocked? ', e);
    } finally {
      // remove overlay and reveal content
      entryOverlay.style.transition = 'opacity .35s ease';
      entryOverlay.style.opacity = '0';
      setTimeout(()=> { entryOverlay.remove(); document.getElementById('appRoot').removeAttribute('aria-hidden'); }, 420);
    }
  }

  enterBtn.addEventListener('click', enterSite);
  // also allow keyboard Enter
  window.addEventListener('keydown', (e)=>{
    if((e.key === 'Enter' || e.keyCode === 13) && document.getElementById('entryOverlay')) {
      enterSite();
    }
  });

  /* ------------------ Pause / Mute controls ------------------ */
  document.getElementById('pauseBtn').addEventListener('click', ()=>{
    if(audioEl.paused) {
      audioEl.play();
      document.getElementById('pauseBtn').textContent = 'Pause';
      if(!rafId) monitorAudio();
    } else {
      audioEl.pause();
      document.getElementById('pauseBtn').textContent = 'Play';
      if(rafId) { cancelAnimationFrame(rafId); rafId = null; }
    }
  });
  document.getElementById('muteBtn').addEventListener('click', ()=>{
    audioEl.muted = !audioEl.muted;
    document.getElementById('muteBtn').textContent = audioEl.muted ? 'Unmute' : 'Mute';
  });

  /* ------------------ small discord status (optional) ------------------ */
  const DISCORD_ID = '904431016175894528';
  async function fetchLanyard(){
    try{
      const res = await fetch('https://api.lanyard.rest/v1/users/' + DISCORD_ID);
      if(!res.ok) throw new Error('Lanyard fetch failed');
      const data = await res.json();
      if(data && data.success && data.data){
        const d = data.data;
        const online = d.discord_status || 'unknown';
        let color = '#777';
        if(online==='online') color = '#3ba55d';
        if(online==='dnd') color = '#ed4245';
        if(online==='idle') color = '#faa81a';
        const st = document.getElementById('statusText');
        st.style.color = color;
        let activity = 'Offline';
        if(d.activities && d.activities.length){
          activity = d.activities.map(a => a.name || a.state || 'Activity').join(', ');
        } else {
          activity = online === 'offline' ? 'Offline' : 'Online';
        }
        st.textContent = activity;
      }
    }catch(err){
      // ignore silently
    }
  }
  // try fetch once (fails silently if blocked)
  fetchLanyard();
  setInterval(fetchLanyard, 30000);
  </script>
</body>
</html>
